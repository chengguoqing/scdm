{"version":3,"sources":["../../../../src/租灵宝/js/page/tuwen.js"],"names":["mui","init","beforeback","list","plus","webview","currentWebview","opener","fire","picker_f","PopPicker","self","ue","UE","getEditor","km","Vue","el","data","type","t_id","h_display","name","keyword","brief","cat_id","cat_text","gallery","content","methods","shangc_sd","title","sd_sd","length","toast","sc","xz","url","goodprocutgallery","Services","usertoken","getusertoken","Image","m_post","push","san_uiuy_s","idx","kjhjs","splice","sd_sde","gallery_id","m_ajax","dingwe","document","activeElement","blur","show","rl","text","value","next_yi_s","add_sd","sd_sdse","map","a","id","bianji","good_id","getContent","sder_sd","console","log","zhu","created","plusReady","e","setData","chuzhu","chushou","yunshu","my_we","view","catlog","substring","sdd_sds","good","setTimeout","setContent"],"mappings":"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","file":"tuwen.js","sourcesContent":["//定位信息发布\r\n\r\nmui.init({\r\n\tbeforeback: function() {\r\n\t\t//获得列表界面的webview  \r\n\t\tvar list = plus.webview.currentWebview().opener();\r\n\t\t//触发列表界面的自定义事件（refresh）,从而进行数据刷新  \r\n\t\tmui.fire(list, 'refr_sdresh');\r\n\t\t//返回true，继续页面关闭逻辑  \r\n\t\treturn true;\r\n\t}\r\n});\r\nvar picker_f = new mui.PopPicker({\r\n\t\"layer\": [3]\r\n});\r\n\r\nvar self = {}\r\nvar ue = UE.getEditor('editor');\r\nvar km = new Vue({\r\n\tel: '#tuwen',\r\n\tdata: {\r\n\t\ttype: self.t_id,\r\n\t\th_display: 2,\r\n\t\tname: \"\", //名称\r\n\t\tkeyword: \"\", //关键词\r\n\t\tbrief: \"\", //描述\r\n\t\tcat_id: \"\", //分类id\r\n\t\tcat_text: \"请选择\",\r\n\t\tgallery: [], //相册id\r\n\t\tcontent: \"\" //详情\r\n\t},\r\n\tmethods: {\r\n\t\tshangc_sd: function(title) { //上传图片\r\n\t\t\tvar sd_sd = this\r\n\t\t\tif(this.gallery.length >= 5) {\r\n\t\t\t\tmui.toast(\"图片最多上传5张!\")\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tsc.xz(title, function(url) {\r\n\t\t\t\tvar goodprocutgallery = {}\r\n\t\t\t\tgoodprocutgallery.Services = \"Image.goodprocutgallery\"\r\n\t\t\t\tgoodprocutgallery.usertoken = getusertoken()\r\n\t\t\t\tgoodprocutgallery.Image = url\r\n\t\t\t\tm_post(goodprocutgallery, function(data) {\r\n\t\t\t\t\tsd_sd.gallery.push(data)\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t},\r\n\t\tsan_uiuy_s: function(idx,kjhjs) { //图片删除\r\n\t\t\tthis.gallery.splice(idx, 1);\r\n\t\t\tif(kjhjs){\r\n\t\t\t\tvar sd_sde={}\r\n\t\t\t\tsd_sde.Services=\"usergood.gpgallerydel\"\r\n\t\t\t\tsd_sde.usertoken=getusertoken()\r\n\t\t\t\tsd_sde.gallery_id=kjhjs\r\n\t\t\t\tm_ajax(sd_sde,function(){\r\n\t\t\t\t\tmui.toast('删除成功');\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\tdingwe: function() {\r\n\t\t\tdocument.activeElement.blur();\r\n\t\t\tvar sd_sd = this\r\n\t\t\tpicker_f.show(function(rl) {\r\n\t\t\t\tsd_sd.cat_text = rl[0].text + (rl[1].text ? '-' + rl[1].text : \"\") + (rl[2].text ? '-' + rl[2].text : \"\")\r\n\t\t\t\tif(rl[0].text) {\r\n\t\t\t\t\tsd_sd.cat_id = rl[0].value\r\n\t\t\t\t}\r\n\t\t\t\tif(rl[1].text) {\r\n\t\t\t\t\tsd_sd.cat_id = rl[1].value\r\n\t\t\t\t}\r\n\t\t\t\tif(rl[2].text) {\r\n\t\t\t\t\tsd_sd.cat_id = rl[2].value\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\tnext_yi_s: function() { //下一步按钮触发\r\n\t\t\tif(!this.name) {\r\n\t\t\t\tmui.toast(\"名称不能为空\")\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tif(!this.cat_id) {\r\n\t\t\t\tmui.toast(\"分类不能为空\")\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tif(!this.keyword) {\r\n\t\t\t\tmui.toast(\"关键词不能为空\")\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tif(!this.brief) {\r\n\t\t\t\tmui.toast(\"描述不能为空\")\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tif(this.gallery.length < 1) {\r\n\t\t\t\tmui.toast(\"相册不能为空\")\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tvar add_sd = {},\r\n\t\t\t\tsd_sdse = []\r\n\t\t\tthis.gallery.map(function(a) {\r\n\t\t\t\r\n\t\t\t\t\tsd_sdse.push(a.id)\r\n\t\t\t\r\n\r\n\t\t\t})\r\n\t\t\tif(self.bianji) {\r\n\t\t\t\tadd_sd.Services = \"usergood.edit\"\r\n\t\t\t\tadd_sd.good_id = self.bianji\r\n\t\t\t} else {\r\n\t\t\t\tadd_sd.Services = \"usergood.add\"\r\n\t\t\t}\r\n\r\n\t\t\tadd_sd.type = self.t_id\r\n\t\t\tadd_sd.usertoken = getusertoken()\r\n\t\t\tadd_sd.h_display = this.h_display\r\n\t\t\tadd_sd.name = this.name\r\n\t\t\tadd_sd.cat_id = this.cat_id\r\n\t\t\tadd_sd.keyword = this.keyword\r\n\t\t\tadd_sd.brief = this.brief\r\n\t\t\tadd_sd.cat_id = this.cat_id\r\n\t\t\tadd_sd.gallery = sd_sdse\r\n\t\t\tadd_sd.content = ue.getContent(); //详情 \r\n\t\t\tvar sder_sd = this\r\n\t\t\tconsole.log(sd_sdse)\r\n\r\n\t\t\tm_post(add_sd, function(data) {\r\n\t\t\t\tif(self.bianji) {\r\n\t\t\t\t\tsder_sd.zhu(\"tuwensan\", 'fade-in', {\r\n\t\t\t\t\t\tgood_id: data.good_id\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsder_sd.zhu(\"tuwener\", 'fade-in', {\r\n\t\t\t\t\t\tgood_id: data.good_id\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n \r\n\t\t\t})\r\n\r\n\t\t}\r\n\t},\r\n\tcreated: function() {\r\n\t\tvar sd_sd = this\r\n\t\tmui.plusReady(function() {\r\n\t\t\ttry {\r\n\t\t\t\tself = plus.webview.currentWebview();\r\n\t\t\t} catch(e) {\r\n\t\t\t\tself.t_id = 1\r\n\t\t\t\tself.bianji = 536\r\n\r\n\t\t\t}\r\n\t\t\tif(self.t_id == 1) {\r\n\t\t\t\tpicker_f.setData(chuzhu)\r\n\t\t\t} else if(self.t_id == 3) {\r\n\t\t\t\tpicker_f.setData(chushou)\r\n\t\t\t} else if(self.t_id == 5) {\r\n\t\t\t\tpicker_f.setData(yunshu)\r\n\t\t\t} else if(self.t_id == 7) {\r\n\t\t\t\tpicker_f.setData(my_we)\r\n\t\t\t}\r\n\r\n\t\t\tif(self.bianji) {\r\n\t\t\t\tvar view = {}\r\n\t\t\t\tview.Services = \"usergood.view\"\r\n\t\t\t\tview.usertoken = getusertoken()\r\n\t\t\t\tview.good_id = self.bianji\r\n\t\t\t\tm_ajax(view, function(data) {\r\n\t\t\t\t\tsd_sd.cat_text = \"\"\r\n\t\t\t\t\tdata.catlog.map(function(a) {\r\n\t\t\t\t\t\tsd_sd.cat_text += a.name + \"-\"\r\n\t\t\t\t\t\tsd_sd.cat_id = a.id\r\n\t\t\t\t\t})\r\n\t\t\t\t\tsd_sd.cat_text = sd_sd.cat_text.substring(0, sd_sd.cat_text.length - 1)\r\n\t\t\t\t\tvar sdd_sds = data\r\n\t\t\t\t\tvar data = data.good\r\n\t\t\t\t\tsd_sd.name = data.name //名称\r\n\t\t\t\t\tsd_sd.keyword = data.keyword //关键词\r\n\t\t\t\t\tsd_sd.brief = data.brief //描述\r\n\t\t\t\t\tsd_sd.content = data.content //详情\r\n\t\t\t\t\tsd_sd.gallery = sdd_sds.gallery\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\tue.setContent(data.content);\r\n\t\t\t\t\t}, 500)\r\n\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n})"]}
{"version":3,"sources":["../../../../src/租灵宝/js/page/set_shop.js"],"names":["dtPicker","mui","DtPicker","ue","UE","getEditor","km","Vue","el","data","lmu","id","name","cls","sd_sdf","er_ssd_sdf","gallery","methods","sdf_sdf_s","host","testing","sdd_srr","Services","usertoken","getusertoken","m_ajax","qye_sd","sd_sdfr","datys","map","a","push","toast","kewords","description","shop_logo","realname","tel","ervicetime","adder","content","getContent","add_sd","sd_sdse","Object","assign","console","log","JSON","stringify","m_post","location","reload","delimg","idx","splice","shop_id","shopid","da_ta","addshop","sd_sdfdrt","h_display","title","banner","sd_sdfs","small","large","setTimeout","setContent","company","nav","shangc_sd","sd_sd","length","sc","xz","url","goodprocutgallery","Image","tytew_sd","document","activeElement","blur","sd_Sd","show","rs","text","yesd_d","hgssf","d_sd_d","q","e","stopPropagation","created","sd_khjs","view"],"mappings":"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","file":"set_shop.js","sourcesContent":["//店铺设置\r\nvar dtPicker = new mui.DtPicker({\r\n\t\"type\": \"date\",\r\n\t\"beginYear\": \"1950\" //开始时间\r\n\r\n});\r\nvar ue = UE.getEditor('editor');\r\nvar km = new Vue({\r\n\tel: '#set_shop',\r\n\tdata: {\r\n\t\tlmu: [{\r\n\t\t\tid: 1,\r\n\t\t\tname: \"出租\",\r\n\t\t\tcls: \"\"\r\n\t\t}, {\r\n\t\t\tid: 3,\r\n\t\t\tname: \"出售\",\r\n\t\t\tcls: \"\"\r\n\t\t}, {\r\n\t\t\tid: 5,\r\n\t\t\tname: \"运输\",\r\n\t\t\tcls: \"\"\r\n\t\t}, {\r\n\t\t\tid: 1,\r\n\t\t\tname: \"维修\",\r\n\t\t\tcls: \"\"\r\n\t\t}],\r\n\t\tsd_sdf: \"\",\r\n\t\ter_ssd_sdf: 1, //判读域名可用\r\n\t\tgallery: [] //相册id\r\n\r\n\t},\r\n\tmethods: {\r\n\t\tsdf_sdf_s: function() { //二级域名查询\r\n\t\t\tvar sd_sdf = this.sd_sdf.host\r\n\t\t\tvar testing = {},\r\n\t\t\t\tsdd_srr = this\r\n\t\t\ttesting.Services = \"usershop.testing\"\r\n\t\t\ttesting.usertoken = getusertoken()\r\n\t\t\ttesting.host = sd_sdf\r\n\t\t\tm_ajax(testing, function(data) {\r\n\t\t\t\tsdd_srr.er_ssd_sdf = data\r\n\t\t\t})\r\n\r\n\t\t},\r\n\t\tqye_sd: function() { //提交按钮触发\r\n\t\t\tvar sd_sdfr = [],\r\n\t\t\t\tdatys = this.sd_sdf\r\n\t\t\tthis.lmu.map(function(a) {\r\n\t\t\t\tif(a.cls == \"act\") {\r\n\t\t\t\t\tsd_sdfr.push(a.id)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tif(this.er_ssd_sdf == 1 && !datys.id) {\r\n\t\t\t\tmui.toast('二级域名不可用');\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\r\n\t\t\tif(!datys.name) {\r\n\t\t\t\tmui.toast('店铺标题不能为空');\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\r\n\t\t\tif(!datys.kewords) {\r\n\t\t\t\tmui.toast('关键词不能为空');\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tif(!datys.description) {\r\n\t\t\t\tmui.toast('seo描述不能为空');\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tif(!datys.shop_logo) {\r\n\t\t\t\tmui.toast('请上传店铺logo');\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\r\n\t\t\tif(!datys.realname) {\r\n\t\t\t\tmui.toast('联系人不能为空');\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tif(!datys.tel) {\r\n\t\t\t\tmui.toast('联系热线不能为空');\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tif(!datys.ervicetime) {\r\n\t\t\t\tmui.toast('营业时间不能为空');\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tif(!datys.adder) {\r\n\t\t\t\tmui.toast('公司地址不能为空');\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tdatys.content = ue.getContent();\r\n\t\t\tif(!datys.content) {\r\n\t\t\t\tmui.toast('详情描述不能为空');\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tvar add_sd = {},\r\n\t\t\t\tsd_sdse = []\r\n\r\n\t\t\tthis.gallery.map(function(a) {\r\n\t\t\t\tsd_sdse.push(a.id)\r\n\t\t\t})\r\n\t\t\tadd_sd.Services = \"usershop.addshop\"\r\n\t\t\tadd_sd.usertoken = getusertoken()\r\n\t\t\tadd_sd.gallery = sd_sdse\r\n\r\n\t\t\tadd_sd = Object.assign(datys, add_sd);\r\n\t\t\tconsole.log(JSON.stringify(add_sd))\r\n\t\t\tm_post(add_sd, function(data) {\r\n\t\t\t\tif(!datys.id){\r\n\t\t\t\t\tmui.toast('店铺添加成功');\r\n\t\t\t\t}else{\r\n\t\t\t\t\tmui.toast('店铺修改成功');\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tlocation.reload();\r\n\t\t\t})\r\n\t\t},\r\n\t\tdelimg: function(idx,id) { //图片删除\r\n\t\t\tthis.gallery.splice(idx, 1);\r\n\t\t\tvar delimg = {}\r\n\t\t\tdelimg.Services = \"usershop.delimg\"\r\n\t\t\tdelimg.usertoken=getusertoken()\r\n\t\t\tdelimg.shop_id = this.sd_sdf.shopid\r\n\t\t\tdelimg.id = id\r\n\t\t\tm_ajax(delimg, function() {\r\n\t\t\t\tmui.toast('banner删除成功');\r\n\t\t\t})\r\n\t\t},\r\n\t\tda_ta: function(data) {\r\n\t\t\tvar addshop = {},\r\n\t\t\t\tsd_sdfdrt = this\r\n\t\t\taddshop.Services = \"usershop.addshop\"\r\n\t\t\taddshop.usertoken = getusertoken()\r\n\t\t\taddshop.h_display = 2\r\n\t\t\tif(data) {\r\n\t\t\t\taddshop = Object.assign(addshop, data); //合并json\r\n\t\t\t\taddshop.name = data.title\r\n\t\t\t\taddshop.shopid = data.id\r\n\t\t\t\tvar sd_sdf = []\r\n\t\t\t\tdata.banner.map(function(a) {\r\n\t\t\t\t\tvar sd_sdfs = {}\r\n\t\t\t\t\tsd_sdfs.id = a.id\r\n\t\t\t\t\tsd_sdfs.small = a.large\r\n\t\t\t\t\tsd_sdf.push(sd_sdfs)\r\n\t\t\t\t})\r\n\t\t\t\tsd_sdfdrt.gallery = sd_sdf\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\tue.setContent(data.content);\r\n\t\t\t\t}, 500)\r\n\t\t\t} else {\r\n\t\t\t\taddshop.company = \"\" //公司名称\r\n\t\t\t\taddshop.name = \"\" //店铺名\r\n\t\t\t\taddshop.nav = [] //店铺栏目（1出租2求租3出售4求购5运输7维修）\r\n\t\t\t\taddshop.host = \"\" //二级域名\r\n\t\t\t\taddshop.kewords = \"\" //关键字\r\n\t\t\t\taddshop.description = \"\" //描述\r\n\t\t\t\taddshop.shop_logo = \"\" //店铺logo\r\n\t\t\t\taddshop.realname = \"\" //真实姓名\r\n\t\t\t\taddshop.tel = \"\" //电话\r\n\t\t\t\taddshop.ervicetime = \"\" //营业时间\r\n\t\t\t\taddshop.adder = \"\" //公司地址\r\n\t\t\t\taddshop.content = \"\" //公司简介\r\n\t\t\t\taddshop.gallery = [] //banner\r\n\r\n\t\t\t}\r\n\t\t\treturn addshop;\r\n\t\t},\r\n\t\tshangc_sd: function(title) { //上传图片\r\n\t\t\tvar sd_sd = this\r\n\t\t\tif(this.gallery.length >= 5) {\r\n\t\t\t\tmui.toast(\"图片最多上传5张!\")\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tsc.xz(title, function(url) {\r\n\t\t\t\tvar goodprocutgallery = {}\r\n\t\t\t\tgoodprocutgallery.Services = \"Image.addshopgallery\"\r\n\t\t\t\tgoodprocutgallery.usertoken = getusertoken()\r\n\t\t\t\tgoodprocutgallery.Image = url\r\n\t\t\t\tm_post(goodprocutgallery, function(data) {\r\n\t\t\t\t\tconsole.log(JSON.stringify(data))\r\n\t\t\t\t\tsd_sd.gallery.push(data)\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t},\r\n\t\ttytew_sd: function() {\r\n\t\t\tdocument.activeElement.blur()\r\n\t\t\tvar sd_Sd = this\r\n\t\t\tdtPicker.show(function(rs) {\r\n\r\n\t\t\t\tsd_Sd.sd_sdf.ervicetime = rs.text\r\n\t\t\t})\r\n\t\t},\r\n\t\tyesd_d: function(title, hgssf) {\r\n\t\t\tvar sd_sd = this\r\n\t\t\tsc.xz(title, function(url) {\r\n\t\t\t\tsd_sd.sd_sdf.shop_logo = url\r\n\t\t\t})\r\n\t\t},\r\n\t\td_sd_d: function(q, e) {\r\n\t\t\te.stopPropagation()\r\n\t\t\tthis.sd_sdf.shop_logo = this\r\n\t\t}\r\n\t},\r\n\tcreated: function() {\r\n\t\tvar sd_khjs = this\r\n\t\tsd_khjs.sd_sdf = sd_khjs.da_ta()\r\n\t\tvar view = {}\r\n\t\tview.Services = \"usershop.view\"\r\n\t\tview.usertoken = getusertoken()\r\n\t\tm_ajax(view, function(data) {\r\n\t\t\tsd_khjs.sd_sdf = sd_khjs.da_ta(data)\r\n\t\t})\r\n\t}\r\n\r\n})"]}
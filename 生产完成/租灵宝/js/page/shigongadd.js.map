{"version":3,"sources":["../../../../src/租灵宝/js/page/shigongadd.js"],"names":["mui","init","beforeback","list","plus","webview","currentWebview","opener","console","log","JSON","stringify","fire","picker_re","PopPicker","setData","dsdd_sd","picker_a","picker_b","self","dtPicker","DtPicker","km","Vue","el","data","kmhs","sheng_a","method_b","method_a","methods","dsf_iuy_s","da_ta","name","toast","budget","projectname","type","deadline","projectcode","biddingcode","time","method","cat_id","address","content","m_post","back","xsd_sdgfx","document","activeElement","blur","sd_ds","show","rl","text","level1","value","level2","level3","tytew_sd","dta","sd_Sd","rs","kjghs_s","sd_sdf","Services","usertoken","getusertoken","i_d","id","method_name","cat_name","areaer","Object","assign","feni_sdfx","sd_sdd","feni_sdfx_b","created","sd_ois","plusReady","projectlog","m_ajax","sd_sds","methodlist","map","a","push","sd_sds_b","userview"],"mappings":"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","file":"shigongadd.js","sourcesContent":["//施工项目添加\r\nmui.init({\r\n\tbeforeback: function() {\r\n\t\t//获得列表界面的webview  \r\n\t\tvar list = plus.webview.currentWebview().opener();\r\n\t\t//触发列表界面的自定义事件（refresh）,从而进行数据刷新  \r\n\t\tconsole.log(JSON.stringify(list))\r\n\t\tmui.fire(list, 'ref_dfresh');\r\n\t\treturn true;\r\n\t}\r\n});\r\n\r\nvar picker_re = new mui.PopPicker({\r\n\t\"layer\": [3]\r\n});\r\npicker_re.setData(dsdd_sd)\r\n\r\nvar picker_a = new mui.PopPicker({\r\n\t\"layer\": [1]\r\n});\r\nvar picker_b = new mui.PopPicker({\r\n\t\"layer\": [1]\r\n});\r\n\r\nvar self = {}\r\n\r\nvar dtPicker = new mui.DtPicker({\r\n\t\"type\": \"date\",\r\n\t\"beginYear\": \"1950\" //开始时间\r\n\r\n});\r\n\r\nvar km = new Vue({\r\n\tel: '#post_message',\r\n\tdata: {\r\n\t\tkmhs: \"\",\r\n\t\tsheng_a: \"\",\r\n\t\tmethod_b: \"\", //分类 \r\n\t\tmethod_a: \"\" //招标方式\r\n\t},\r\n\tmethods: {\r\n\t\tdsf_iuy_s: function() { //提交\r\n\t\t\tvar da_ta = this.kmhs\r\n\t\t\tif(!da_ta.name) {\r\n\t\t\t\tmui.toast('标题不能为空');\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tif(!da_ta.budget) {\r\n\t\t\t\tmui.toast('预算不能为空');\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tif(!da_ta.projectname) {\r\n\t\t\t\tmui.toast('工程名称不能为空');\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tif(!da_ta.type) {\r\n\t\t\t\tmui.toast('工程类型不能为空');\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\r\n\t\t\tif(!da_ta.deadline) {\r\n\t\t\t\tmui.toast('投标截止时间不能为空');\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tif(!da_ta.projectcode) {\r\n\t\t\t\tmui.toast('项目编号不能为空');\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tif(!da_ta.biddingcode) {\r\n\t\t\t\tmui.toast('招标编号不能为空');\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tif(!da_ta.time) {\r\n\t\t\t\tmui.toast('招标开始时间不能为空');\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tif(!da_ta.method) {\r\n\t\t\t\tmui.toast('请选择招标方式');\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tif(!da_ta.cat_id) {\r\n\t\t\t\tmui.toast('请选择工程类别');\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tif(!this.sheng_a) {\r\n\t\t\t\tmui.toast('请选择所在区域');\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tif(!da_ta.address) {\r\n\t\t\t\tmui.toast('详细地址不能为空');\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tif(!da_ta.content) {\r\n\t\t\t\tmui.toast('项目详情不能为空');\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tm_post(da_ta, function(data) {\r\n\t\t\t\tmui.back()\r\n\t\t\t})\r\n\r\n\t\t},\r\n\t\txsd_sdgfx: function() {\r\n\t\t\tdocument.activeElement.blur()\r\n\t\t\tvar sd_ds = this\r\n\t\t\tpicker_re.show(function(rl) {\r\n\t\t\t\tsd_ds.sheng_a = rl[0].text + \"-\" + rl[1].text + (rl[2].text ? '-' + rl[2].text : '')\r\n\t\t\t\tsd_ds.kmhs.level1 = rl[0].value\r\n\t\t\t\tsd_ds.kmhs.level2 = rl[1].value\r\n\t\t\t\tsd_ds.kmhs.level3 = rl[2].value\r\n\t\t\t})\r\n\t\t},\r\n\t\ttytew_sd: function(dta) {\r\n\t\t\t   document.activeElement.blur();\r\n\t\t\tvar sd_Sd = this\r\n\t\t\tdtPicker.show(function(rs) {\r\n\t\t\t\tif(dta == 1) {\r\n\t\t\t\t\tsd_Sd.kmhs.deadline = rs.text\r\n\t\t\t\t} else if(dta == 2) {\r\n\t\t\t\t\tsd_Sd.kmhs.time = rs.text\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\tkjghs_s: function(data) {\r\n\t\t\tvar sd_sdf = {}\r\n\t\t\tsd_sdf.Services = \"project.add\"\r\n\t\t\tsd_sdf.usertoken = getusertoken()\r\n\t\t\tif(self.i_d) {\r\n\t\t\t\tsd_sdf.id = self.i_d\r\n\t\t\t}\r\n\t\t\tif(data) {\r\n\t\t\t\tthis.method_a = data.method_name\r\n\t\t\t\tthis.method_b = data.cat_name\r\n\t\t\t\tthis.sheng_a = data.areaer[1].name + \">\" + data.areaer[2].name + \">\" + data.areaer[3].name\r\n\t\t\t\tObject.assign(sd_sdf, data);\r\n\t\t\t} else {\r\n\t\t\t\tsd_sdf.name = \"\" //标题\r\n\t\t\t\tsd_sdf.cat_id = \"\" //项目分类\r\n\t\t\t\tsd_sdf.budget = \"\" //预算\r\n\t\t\t\tsd_sdf.projectname = \"\" //\t工程名称\r\n\t\t\t\tsd_sdf.type = \"\" //工程类型\r\n\t\t\t\tsd_sdf.deadline = \"\" //投标截止时间\r\n\t\t\t\tsd_sdf.projectcode = \"\" //\t项目编号\r\n\t\t\t\tsd_sdf.biddingcode = \"\" //\t招标编号\r\n\t\t\t\tsd_sdf.time = \"\" //招标开始时间\r\n\t\t\t\tsd_sdf.method = \"\" //招标方式\r\n\t\t\t\tsd_sdf.level1 = \"\" //\r\n\t\t\t\tsd_sdf.level2 = \"\" //\r\n\t\t\t\tsd_sdf.level3 = \"\" //\r\n\t\t\t\tsd_sdf.address = \"\" //详细地址\r\n\t\t\t\tsd_sdf.content = \"\" //项目详情\r\n\t\t\t}\r\n\t\t\treturn sd_sdf;\r\n\t\t},\r\n\t\tfeni_sdfx: function() { //招标方式\r\n\t\t\t   document.activeElement.blur();\r\n\t\t\tvar sd_sdd = this\r\n\t\t\tpicker_a.show(function(rs) {\r\n\t\t\t\tsd_sdd.kmhs.method  = rs[0].value\r\n\t\t\t\tsd_sdd.method_a= rs[0].text\r\n\t\t\t})\r\n\t\t},\r\n\t\tfeni_sdfx_b: function() { //工程类别\r\n\t\t\t   document.activeElement.blur();\r\n\t\t\tvar sd_sdd = this\r\n\t\t\tpicker_b.show(function(rs) {\r\n\t\t\t\tsd_sdd.kmhs.cat_id = rs[0].value\r\n\t\t\t\tsd_sdd.method_b = rs[0].text\r\n\t\t\t})\r\n\t\t}\r\n\t},\r\n\tcreated: function() {\r\n\t\tvar sd_ois = this\r\n\t\tmui.plusReady(function() {\r\n\t\t\tself = plus.webview.currentWebview();\r\n\t\t\tvar projectlog = {}\r\n\t\t\tprojectlog.Services = \"project.projectlog\"\r\n\t\t\tm_ajax(projectlog, function(data) { //获取分类信息\r\n\t\t\t\tvar sd_sds = []\r\n\t\t\t\tdata.methodlist.map(function(a) {\r\n\t\t\t\t\tvar sd_sdf = {}\r\n\t\t\t\t\tsd_sdf.value = a.id\r\n\t\t\t\t\tsd_sdf.text = a.name\r\n\t\t\t\t\tsd_sds.push(sd_sdf)\r\n\t\t\t\t})\r\n\t\t\t\tvar sd_sds_b = []\r\n\t\t\t\tdata.projectlog.map(function(a) {\r\n\t\t\t\t\tvar sd_sdf = {}\r\n\t\t\t\t\tsd_sdf.value = a.id\r\n\t\t\t\t\tsd_sdf.text = a.name\r\n\t\t\t\t\tsd_sds_b.push(sd_sdf)\r\n\t\t\t\t})\r\n\t\t\t\tpicker_a.setData(sd_sds)\r\n\t\t\t\tpicker_b.setData(sd_sds_b)\r\n\t\t\t})\r\n\r\n\t\t\tif(self.i_d) { //获取单条信息\r\n\t\t\t\tvar userview = {}\r\n\t\t\t\tuserview.Services = \"project.userview\"\r\n\t\t\t\tuserview.usertoken = getusertoken()\r\n\t\t\t\tuserview.id = self.i_d\r\n\t\t\t\tm_ajax(userview, function(data) {\r\n\t\t\t\t\tsd_ois.kmhs = sd_ois.kjghs_s(data)\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\tsd_ois.kmhs = sd_ois.kjghs_s()\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n})"]}
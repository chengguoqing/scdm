{"version":3,"sources":["../../../../src/租灵宝/js/page/shigong.js"],"names":["more","mui","init","pullRefresh","container","up","contentrefresh","callback","pullupRefreshts","km","Vue","el","data","sd_sdzs","type","mare_list","methods","fenlei_sd","idx","map","a","cls","page","cat_id","sd_dsdf","bianji","id","zhu","i_d","sanchu","idex","sd_sdf","gooddel","Services","usertoken","getusertoken","confirm","dd","index","splice","m_ajax","each","swipeoutClose","toast","lksd","sd_sd","length","e","prolist","push","document","getElementById","classList","add","remove","created","plusReady","window","addEventListener","location","reload","sd_s","keyword","da_l","endPullupToRefresh"],"mappings":"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","file":"shigong.js","sourcesContent":["//施工项目列表\r\n\r\nvar more = {}\r\nmui.init({\r\n\tpullRefresh: {\r\n\t\tcontainer: '#pullrefresh',\r\n\t\tup: {\r\n\t\t\tcontentrefresh: '正在加载...',\r\n\t\t\tcallback: pullupRefreshts\r\n\t\t}\r\n\t}\r\n});\r\n\r\nvar km = new Vue({\r\n\tel: '#shigong',\r\n\tdata: {\r\n\t\tsd_sdzs: [{\r\n\t\t\t\"name\": \"全部\",\r\n\t\t\ttype: 0\r\n\t\t}, {\r\n\t\t\t\"name\": \"总承包\",\r\n\t\t\ttype: 1\r\n\t\t}, {\r\n\t\t\t\"name\": \"专业分包\",\r\n\t\t\ttype: 2\r\n\t\t}, {\r\n\t\t\t\"name\": \"劳务清包\",\r\n\t\t\ttype: 3\r\n\t\t}],\r\n\t\tmare_list: []\r\n\t},\r\n\tmethods: {\r\n\t\tfenlei_sd: function(idx) { //头部切换\r\n\t\t\tthis.sd_sdzs.map(function(a) {\r\n\t\t\t\ta.cls = \"\"\r\n\t\t\t})\r\n\t\t\tthis.sd_sdzs[idx].cls = \"act\"\r\n\t\t\tthis.mare_list = []\r\n\t\t\tmore.page = 1\r\n\t\t\tmore.cat_id = idx\r\n\t\t\tthis.sd_dsdf(more)\r\n\t\t},\r\n\t\tbianji: function(id) { //编辑\r\n\t\t\tthis.zhu(\"shigongadd\", \"\", {\r\n\t\t\t\ti_d: id\r\n\t\t\t})\r\n\t\t},\r\n\t\tsanchu: function(id, idex) {\r\n\t\t\tvar sd_sdf = this,\r\n\t\t\t\tgooddel = {}\r\n\t\t\tgooddel.Services = \"project.del\"\r\n\t\t\tgooddel.usertoken = getusertoken()\r\n\t\t\tgooddel.id = id\r\n\t\t\tmui.confirm(\"确认删除？\", function(dd) {\r\n\t\t\t\tif(dd.index == 1) {\r\n\t\t\t\t\tsd_sdf.mare_list.splice(idex, 1)\r\n\t\t\t\t\tm_ajax(gooddel, function() {\r\n\t\t\t\t\t\tmui(\".mui-table-view-cell\").each(function() {\r\n\t\t\t\t\t\t\tmui.swipeoutClose(this)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tmui.toast(\"删除成功\")\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\tsd_dsdf: function(more, lksd) {\r\n\t\t\tvar sd_sd = this\r\n\t\t\ttry {\r\n\t\t\t\tlksd(sd_sd.mare_list.length)\r\n\t\t\t} catch(e) {\r\n\r\n\t\t\t}\r\n\t\t\tm_ajax(more, function(data) {\r\n\t\t\t\tdata.prolist.map(function(a) {\r\n\t\t\t\t\tsd_sd.mare_list.push(a)\r\n\t\t\t\t})\r\n\t\t\t\tif(sd_sd.mare_list.length < 1) {\r\n\t\t\t\t\tdocument.getElementById(\"ds_d_dd_dfw\").classList.add(\"show\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdocument.getElementById(\"ds_d_dd_dfw\").classList.remove(\"show\");\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t}\r\n\t},\r\n\tcreated: function() {\r\n\t\tmore.Services = \"project.usermore\"\r\n\t\tmore.usertoken = getusertoken()\r\n\t\tmore.page = 1\r\n\t\tmore.cat_id = 0\r\n\t\tthis.sd_dsdf(more)\r\n\t}\r\n\r\n})\r\nmui.plusReady(function() {\r\n\twindow.addEventListener('ref_dfresh', function(e) {\r\n\t\tlocation.reload();\r\n\r\n\t})\r\n})\r\n\r\nfunction pullupRefreshts() {\r\n\tvar sd_s = this\r\n\tmore.page++;\r\n\tmore.keyword = \"\"\r\n\tkm.sd_dsdf(more, function(da_l) {\r\n\t\tif(da_l <= 0) {\r\n\t\t\tsd_s.endPullupToRefresh(true)\r\n\t\t\treturn\r\n\t\t}\r\n\t\tsd_s.endPullupToRefresh(false)\r\n\t})\r\n}"]}
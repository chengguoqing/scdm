var sd_sdrtt="",bototm_s="",webviewGroup=function(a,b,c,d){sd_sdrtt=c,bototm_s=d,this.id=a,this.options=b,this.styles=b.styles,this.items=b.items,this.onChange=b.onChange,this.options.index=b.index||0,this.webviews={},this.webviewContexts={},this.currentWebview=!1,this._init()},proto=webviewGroup.prototype;proto._init=function(){this._initParent(),this._initNativeView(),this._initWebviewContexts(this.options.index)},proto._initParent=function(){this.parent=plus.webview.getWebviewById(this.id),this.parent||(this.parent=plus.webview.create(this.id,this.id),this.parent.show("none"))},proto._initNativeView=function(){var a=plus.navigator.getStatusbarHeight();this.nativeView=new plus.nativeObj.View("__MUI_TAB_NATIVE",{top:686+a+"px",height:window.screen.height-86+"px",left:"100%",width:"100%",backgroundColor:"#ffffff"}),this.nativeView.show()},proto._initWebviewContexts=function(){for(var a=this.items.length,b=a-1;b>=0;b--){var c=this.items[b],d=c.id,e=0===b,f=b===a-1,g=this.options.index===b,h=c.extras;h.__mui_url=c.url,h.__mui_index=b,h.__mui_left=e?"":this.items[b-1].id,h.__mui_right=f?"":this.items[b+1].id;var i=c.styles||{};b>this.options.index?i.left="100%":b<this.options.index?i.left="-100%":i.left="0";var j=new webviewGroupContext(d,c,this);this.webviewContexts[d]=j,g&&(j.webview=plus.webview.getWebviewById(d),j.createWebview(),j.webview.show("none"),this._initDrags(j.webview),this.currentWebview=j.webview)}},proto._onChange=function(a){this.currentWebview=a,this.onChange({index:a.__mui_index})},proto._dragCallback=function(a,b,c,d){if(c===this.nativeView){this.webviewContexts[d].createWebview("drag");var e=this.webviewContexts[d].webview;e.show(),this.nativeView.setStyle({left:"100%"}),this._initDrags(e),this._onChange(e),this._checkDrags(e)}else this._onChange(c)},proto._initDrag=function(a,b){var c="__mui_drag_"+b+"_flag";if(!a[c]){var d=a["__mui_"+("left"===b?"right":"left")];if(d){var e=plus.webview.getWebviewById(d);e?a[c]=!0:e=this.nativeView,a.drag({direction:b,moveMode:"followFinger"},{view:e,moveMode:"follow"},function(c){"end"===c.type&&c.result&&this._dragCallback(b,a,e,d)}.bind(this))}else a[c]=!0}},proto._initDrags=function(a){this._initDrag(a,"left"),this._initDrag(a,"right")},proto._checkDrags=function(a){var b=a.__mui_left,c=a.__mui_right;if(b){var d=plus.webview.getWebviewById(b);d&&!d.__mui_drag_left_flag&&this._initDrag(d,"left")}if(c){var e=plus.webview.getWebviewById(c);e&&!e.__mui_drag_right_flag&&this._initDrag(e,"right")}},proto.getCurrentWebview=function(){return this.currentWebview},proto.getCurrentWebviewContext=function(){return!!this.currentWebview&&this.webviewContexts[this.currentWebview.id]},proto.switchTab=function(a){a=a.replace("_0","");var b=this.currentWebview;if(a!==b.id){var c=this.webviewContexts[a],d=c.webview,e="100%",f="-100%";c.options.extras.__mui_index>b.__mui_index&&(e="-100%",f="100%");var g=!1;d||(g=!0,c.createWebview("startAnimation"),d=c.webview,d.show(),this._initDrags(d),this._checkDrags(d));plus.webview.startAnimation({view:b,styles:{fromLeft:"0",toLeft:e},action:"show"},{view:d,styles:{fromLeft:f,toLeft:"0"},action:"show"},function(a){a.id===d.id&&(g&&plus.nativeUI.showWaiting(),this.currentWebview=d,this.onChange({index:d.__mui_index}))}.bind(this))}};var webviewGroupContext=function(a,b,c){this.id=a,this.url=b.url,this.options=b,this.groupContext=c,this.webview=!1,this.inited=!1},_proto=webviewGroupContext.prototype;_proto.createWebview=function(a){var b=this.options;if(b.styles=b.styles||{top:sd_sdrtt||"86",bottom:bototm_s||"0px",render:"always"},b.styles.popGesture="none",this.webview){this.webview.setStyle(b.styles);for(var c in b.extras)this.webview[c]=b.extras[c]}else b.styles.left="100%","startAnimation"!==a&&(b.styles.left="0",plus.nativeUI.showWaiting()),this.webview=plus.webview.create(this.url,this.id,b.styles,b.extras),plus.webview.currentWebview().append(this.webview);this._initWebview(),this.inited=!0},_proto._initWebview=function(){var a=this.options;if(this.webview&&(this.webview.addEventListener("rendering",function(){setTimeout(function(){plus.nativeUI.closeWaiting()},500)}),a.pullToRefresh&&a.pullToRefresh.support&&support.pullToRefresh())){var b=a.pullToRefresh.callback;this.webview.setPullToRefresh(a.pullToRefresh,function(){if(b)b(this.webview);else{var a=this,c=function(){setTimeout(function(){a.webview.endPullToRefresh()}.bind(this),1e3),a.webview.removeEventListener("titleUpdate",c)};this.webview.addEventListener("titleUpdate",c),this.webview.reload()}}.bind(this))}};
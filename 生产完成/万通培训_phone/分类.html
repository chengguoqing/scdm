<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <title></title>
    <link href="css/mui.min.css" rel="stylesheet" />
    <link href="css/font-awesome.min.css" rel="stylesheet" />
    <link href="css/base.css" rel="stylesheet" />
    <link href="css/style.css" rel="stylesheet" />
    <style>
        .mui-row.mui-fullscreen>[class*="mui-col-"] {
            height: 100%;
        }

        .mui-col-xs-3,
        .mui-col-xs-9 {
            overflow-y: auto;
            height: 100%;
        }

        .mui-segmented-control .mui-control-item {
            line-height: 50px;
            width: 100%;
        }

        .mui-control-content {
            display: block;
        }

        .mui-segmented-control.mui-segmented-control-inverted .mui-control-item.mui-active {
            background-color: #fff;
        }
        .mui-control-item,#segmentedControlContents{
            border: 0px !important;
        }
        .mui-control-item.mui-active{
            color: #000 !important;
            background: #F4F5F7 !important;
        }

    </style>
</head>

<body>

   
    <div class="mui-content mui-row mui-fullscreen">
        <div class="mui-col-xs-3 bgff">
            <div id="segmentedControls" class="mui-segmented-control mui-segmented-control-inverted mui-segmented-control-vertical">


                <a class="mui-control-item mui-active" data-index="0" href="#content0">视频学习</a>
                <a class="mui-control-item" data-index="1" href="#content1">图文资料</a>
                <a class="mui-control-item" data-index="2" href="#content2">资料下载</a>
                <a class="mui-control-item" data-index="3" href="#content3">班级学习</a>
                <a class="mui-control-item" data-index="4" href="#content4">维修案例</a>
                <a class="mui-control-item" data-index="5" href="#content5">免费体验</a>
            </div>
        </div>
        <div id="segmentedControlContents" class="mui-col-xs-9" style="border-left: 1px solid #c8c7cc;">
            <div id="content0" class="mui-control-content pd">
                <section>
                    <p class="pt10 z6 pm10">
                        视频学习
                    </p>
                    <section class="pd pt1 pm10 bgff mui-row pt10">
                        <p class="mui-col-xs-4  cen dsf_d_sdfgfx dian">
                            <a href="" class="z6 fz14">手工入门</a>
                        </p>
                        <p class="mui-col-xs-4  cen dsf_d_sdfgfx dian">
                            <a href="" class="z6 fz14">手工入门</a>
                        </p>
                        <p class="mui-col-xs-4  cen dsf_d_sdfgfx dian">
                            <a href="" class="z6 fz14">手工入门</a>
                        </p>
                        <p class="mui-col-xs-4  cen dsf_d_sdfgfx dian">
                            <a href="" class="z6 fz14">手工入门</a>
                        </p>
                        <p class="mui-col-xs-4  cen dsf_d_sdfgfx dian">
                            <a href="" class="z6 fz14">手工入门</a>
                        </p>

                        <p class="mui-col-xs-4  cen dsf_d_sdfgfx dian">
                            <a href="" class="z6 fz14">手工入门</a>
                        </p>
                        <p class="mui-col-xs-4  cen dsf_d_sdfgfx dian">
                            <a href="" class="z6 fz14">手工入门</a>
                        </p>

                        <p class="mui-col-xs-4  cen dsf_d_sdfgfx dian">
                            <a href="" class="z6 fz14">手工入门</a>
                        </p>
                        <p class="mui-col-xs-4  cen dsf_d_sdfgfx dian">
                            <a href="" class="z6 fz14">手工入门</a>
                        </p>


                    </section>
                </section>
            </div>
            <div id="content1" class="mui-control-content pd">
                       <section>
                    <p class="pt10 z6 pm10">
                        图文资料
                    </p>
                    <section class="pd pt1 pm10 bgff mui-row pt10">
                        <p class="mui-col-xs-4  cen dsf_d_sdfgfx dian">
                            <a href="" class="z6 fz14">手工入门</a>
                        </p>
                        <p class="mui-col-xs-4  cen dsf_d_sdfgfx dian">
                            <a href="" class="z6 fz14">手工入门</a>
                        </p>
                        <p class="mui-col-xs-4  cen dsf_d_sdfgfx dian">
                            <a href="" class="z6 fz14">手工入门</a>
                        </p>
                        <p class="mui-col-xs-4  cen dsf_d_sdfgfx dian">
                            <a href="" class="z6 fz14">手工入门</a>
                        </p>
                        <p class="mui-col-xs-4  cen dsf_d_sdfgfx dian">
                            <a href="" class="z6 fz14">手工入门</a>
                        </p>

                        <p class="mui-col-xs-4  cen dsf_d_sdfgfx dian">
                            <a href="" class="z6 fz14">手工入门</a>
                        </p>
                        <p class="mui-col-xs-4  cen dsf_d_sdfgfx dian">
                            <a href="" class="z6 fz14">手工入门</a>
                        </p>

                        <p class="mui-col-xs-4  cen dsf_d_sdfgfx dian">
                            <a href="" class="z6 fz14">手工入门</a>
                        </p>
                        <p class="mui-col-xs-4  cen dsf_d_sdfgfx dian">
                            <a href="" class="z6 fz14">手工入门</a>
                        </p>


                    </section>
                </section>
                
            </div>
            <div id="content2" class="mui-control-content pd">
                
                       <section>
                    <p class="pt10 z6 pm10">
                        资料下载
                    </p>
                    <section class="pd pt1 pm10 bgff mui-row pt10">
                        <p class="mui-col-xs-4  cen dsf_d_sdfgfx dian">
                            <a href="" class="z6 fz14">手工入门</a>
                        </p>
                        <p class="mui-col-xs-4  cen dsf_d_sdfgfx dian">
                            <a href="" class="z6 fz14">手工入门</a>
                        </p>
                        <p class="mui-col-xs-4  cen dsf_d_sdfgfx dian">
                            <a href="" class="z6 fz14">手工入门</a>
                        </p>
                        <p class="mui-col-xs-4  cen dsf_d_sdfgfx dian">
                            <a href="" class="z6 fz14">手工入门</a>
                        </p>
                        <p class="mui-col-xs-4  cen dsf_d_sdfgfx dian">
                            <a href="" class="z6 fz14">手工入门</a>
                        </p>

                        <p class="mui-col-xs-4  cen dsf_d_sdfgfx dian">
                            <a href="" class="z6 fz14">手工入门</a>
                        </p>
                        <p class="mui-col-xs-4  cen dsf_d_sdfgfx dian">
                            <a href="" class="z6 fz14">手工入门</a>
                        </p>

                        <p class="mui-col-xs-4  cen dsf_d_sdfgfx dian">
                            <a href="" class="z6 fz14">手工入门</a>
                        </p>
                        <p class="mui-col-xs-4  cen dsf_d_sdfgfx dian">
                            <a href="" class="z6 fz14">手工入门</a>
                        </p>


                    </section>
                </section>
            </div>
            <div id="content3" class="mui-control-content pd">
                
                       <section>
                    <p class="pt10 z6 pm10">
                        班级学习
                    </p>
                    <section class="pd pt1 pm10 bgff mui-row pt10">
                        <p class="mui-col-xs-4  cen dsf_d_sdfgfx dian">
                            <a href="" class="z6 fz14">手工入门</a>
                        </p>
                        <p class="mui-col-xs-4  cen dsf_d_sdfgfx dian">
                            <a href="" class="z6 fz14">手工入门</a>
                        </p>
                        <p class="mui-col-xs-4  cen dsf_d_sdfgfx dian">
                            <a href="" class="z6 fz14">手工入门</a>
                        </p>
                        <p class="mui-col-xs-4  cen dsf_d_sdfgfx dian">
                            <a href="" class="z6 fz14">手工入门</a>
                        </p>
                        <p class="mui-col-xs-4  cen dsf_d_sdfgfx dian">
                            <a href="" class="z6 fz14">手工入门</a>
                        </p>

                        <p class="mui-col-xs-4  cen dsf_d_sdfgfx dian">
                            <a href="" class="z6 fz14">手工入门</a>
                        </p>
                        <p class="mui-col-xs-4  cen dsf_d_sdfgfx dian">
                            <a href="" class="z6 fz14">手工入门</a>
                        </p>

                        <p class="mui-col-xs-4  cen dsf_d_sdfgfx dian">
                            <a href="" class="z6 fz14">手工入门</a>
                        </p>
                        <p class="mui-col-xs-4  cen dsf_d_sdfgfx dian">
                            <a href="" class="z6 fz14">手工入门</a>
                        </p>


                    </section>
                </section>
            </div>
            <div id="content4" class="mui-control-content pd">
                
                       <section>
                    <p class="pt10 z6 pm10">
                        维修案例
                    </p>
                    <section class="pd pt1 pm10 bgff mui-row pt10">
                        <p class="mui-col-xs-4  cen dsf_d_sdfgfx dian">
                            <a href="" class="z6 fz14">手工入门</a>
                        </p>
                        <p class="mui-col-xs-4  cen dsf_d_sdfgfx dian">
                            <a href="" class="z6 fz14">手工入门</a>
                        </p>
                        <p class="mui-col-xs-4  cen dsf_d_sdfgfx dian">
                            <a href="" class="z6 fz14">手工入门</a>
                        </p>
                        <p class="mui-col-xs-4  cen dsf_d_sdfgfx dian">
                            <a href="" class="z6 fz14">手工入门</a>
                        </p>
                        <p class="mui-col-xs-4  cen dsf_d_sdfgfx dian">
                            <a href="" class="z6 fz14">手工入门</a>
                        </p>

                        <p class="mui-col-xs-4  cen dsf_d_sdfgfx dian">
                            <a href="" class="z6 fz14">手工入门</a>
                        </p>
                        <p class="mui-col-xs-4  cen dsf_d_sdfgfx dian">
                            <a href="" class="z6 fz14">手工入门</a>
                        </p>

                        <p class="mui-col-xs-4  cen dsf_d_sdfgfx dian">
                            <a href="" class="z6 fz14">手工入门</a>
                        </p>
                        <p class="mui-col-xs-4  cen dsf_d_sdfgfx dian">
                            <a href="" class="z6 fz14">手工入门</a>
                        </p>


                    </section>
                </section>
            </div>
            <div id="content5" class="mui-control-content pd">
                
                       <section>
                    <p class="pt10 z6 pm10">
                        免费体验
                    </p>
                    <section class="pd pt1 pm10 bgff mui-row pt10">
                        <p class="mui-col-xs-4  cen dsf_d_sdfgfx dian">
                            <a href="" class="z6 fz14">手工入门</a>
                        </p>
                        <p class="mui-col-xs-4  cen dsf_d_sdfgfx dian">
                            <a href="" class="z6 fz14">手工入门</a>
                        </p>
                        <p class="mui-col-xs-4  cen dsf_d_sdfgfx dian">
                            <a href="" class="z6 fz14">手工入门</a>
                        </p>
                        <p class="mui-col-xs-4  cen dsf_d_sdfgfx dian">
                            <a href="" class="z6 fz14">手工入门</a>
                        </p>
                        <p class="mui-col-xs-4  cen dsf_d_sdfgfx dian">
                            <a href="" class="z6 fz14">手工入门</a>
                        </p>

                        <p class="mui-col-xs-4  cen dsf_d_sdfgfx dian">
                            <a href="" class="z6 fz14">手工入门</a>
                        </p>
                        <p class="mui-col-xs-4  cen dsf_d_sdfgfx dian">
                            <a href="" class="z6 fz14">手工入门</a>
                        </p>

                        <p class="mui-col-xs-4  cen dsf_d_sdfgfx dian">
                            <a href="" class="z6 fz14">手工入门</a>
                        </p>
                        <p class="mui-col-xs-4  cen dsf_d_sdfgfx dian">
                            <a href="" class="z6 fz14">手工入门</a>
                        </p>


                    </section>
                </section>
            </div>

        </div>
    </div>
    <script src="js/mui.min.js"></script>
    <script>
        mui.init({
            swipeBack: true //启用右滑关闭功能
        });


        gun()



        function gun() {
            var controlsElem = document.getElementById("segmentedControls");
            var contentsElem = document.getElementById("segmentedControlContents");
            var controlListElem = controlsElem.querySelectorAll('.mui-control-item');
            var contentListElem = contentsElem.querySelectorAll('.mui-control-content');
            var controlWrapperElem = controlsElem.parentNode;
            var controlWrapperHeight = controlWrapperElem.offsetHeight;
            var controlMaxScroll = controlWrapperElem.scrollHeight - controlWrapperHeight; //左侧类别最大可滚动高度
            var maxScroll = contentsElem.scrollHeight - contentsElem.offsetHeight; //右侧内容最大可滚动高度
            var controlHeight = controlListElem[0].offsetHeight; //左侧类别每一项的高度
            var controlTops = []; //存储control的scrollTop值
            var contentTops = [0]; //存储content的scrollTop值
            var length = contentListElem.length;
            for (var i = 0; i < length; i++) {
                controlTops.push(controlListElem[i].offsetTop + controlHeight);
            }
            for (var i = 1; i < length; i++) {
                var offsetTop = contentListElem[i].offsetTop;
                if (offsetTop + 100 >= maxScroll) {
                    var height = Math.max(offsetTop + 100 - maxScroll, 100);
                    var totalHeight = 0;
                    var heights = [];
                    for (var j = i; j < length; j++) {
                        var offsetHeight = contentListElem[j].offsetHeight;
                        totalHeight += offsetHeight;
                        heights.push(totalHeight);
                    }
                    for (var m = 0, len = heights.length; m < len; m++) {
                        contentTops.push(parseInt(maxScroll - (height - heights[m] / totalHeight * height)));
                    }
                    break;
                } else {
                    contentTops.push(parseInt(offsetTop));
                }
            }
            contentsElem.addEventListener('scroll', function() {
                var scrollTop = contentsElem.scrollTop;
                for (var i = 0; i < length; i++) {
                    var offsetTop = contentTops[i];
                    var offset = Math.abs(offsetTop - scrollTop);
                    //                      console.log("i:"+i+",scrollTop:"+scrollTop+",offsetTop:"+offsetTop+",offset:"+offset);
                    if (scrollTop < offsetTop) {
                        if (scrollTop >= maxScroll) {
                            onScroll(length - 1);
                        } else {
                            onScroll(i - 1);
                        }
                        break;
                    } else if (offset < 20) {
                        onScroll(i);
                        break;
                    } else if (scrollTop >= maxScroll) {
                        onScroll(length - 1);
                        break;
                    }
                }
            });
            var lastIndex = 0;
            //监听content滚动
            var onScroll = function(index) {
                if (lastIndex !== index) {
                    lastIndex = index;
                    var lastActiveElem = controlsElem.querySelector('.mui-active');
                    lastActiveElem && (lastActiveElem.classList.remove('mui-active'));
                    var currentElem = controlsElem.querySelector('.mui-control-item:nth-child(' + (index + 1) + ')');
                    currentElem.classList.add('mui-active');
                    //简单处理左侧分类滚动，要么滚动到底，要么滚动到顶
                    var controlScrollTop = controlWrapperElem.scrollTop;
                    if (controlScrollTop + controlWrapperHeight < controlTops[index]) {
                        controlWrapperElem.scrollTop = controlMaxScroll;
                    } else if (controlScrollTop > controlTops[index] - controlHeight) {
                        controlWrapperElem.scrollTop = 0;
                    }
                }
            };
            //滚动到指定content
            var scrollTo = function(index) {
                contentsElem.scrollTop = contentTops[index];
            };
            mui(controlsElem).on('tap', '.mui-control-item', function(e) {
                scrollTo(this.getAttribute('data-index'));
                return false;
            });
        }

    </script>

</body>

</html>

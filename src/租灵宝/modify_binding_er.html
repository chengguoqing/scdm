<!--修改绑定手机-->
<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>修改绑定手机</title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="css/mui.min.css" rel="stylesheet" />
		<link href="css/base.css" rel="stylesheet" />
		<link href="css/style.css" rel="stylesheet" />
	</head>

	<body>

		<header class="mui-bar mui-bar-nav">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<h1 class="mui-title">修改绑定手机</h1>
		</header>
		<div class="mui-content" id="modify_binding">
			<p class="z6 pt10 pm10 dsf_d_sdsf">
				你正在修改租灵宝账户绑定的手机号码，请验证身份
			</p>

			<section class="bgff mt10">
				<section class="dsf_d_sdsf  pt10 pm10">
					<yanzhen :tishi="'请输入新手机号'" :ty_pe="0" @tijiao="xing_sj"></yanzhen>
					<ul class="dsf_fort">

						<li class="mui-input-row">
							<input type="text" placeholder="新手机验证码" class="dsf_s_sdf mui-input-clear" v-model="xyama">
						</li>

					</ul>

				</section>
			</section>
			<p class="mt40 dsf_d_sdsf">
				<button type="button" class="mui-btn mui-btn-primary w100 fz16 yj20 pt wdf_dfg" @tap="qtijiao">确定</button>
			</p>
		</div>
		<script src="js/mui.min.js"></script>
		<script src="js/vue.min.js"></script>
		<script src="js/base.js"></script>
		<script src="js/component/yanzhen.js"></script>
		<script>
			var km = new Vue({
				el: '#modify_binding',
				data: {
					jmosd: "",
					jyama: "",
					xmosd: "",
					xyama: "",
					gf_sds: ""
				},
				methods: {
					jiu_sj: function(phone) { //旧手机
						this.jmosd = phone
					},
					xing_sj: function(phone) { //新手机
						this.xmosd = phone
					},
					qtijiao: function() {
						if(!this.xmosd) {
							alert("新手机验证码不能为空")
							return
						}
						if(!this.xyama) {
							alert("新手机验证码不能为空")
							return
						}
						var VerifyCode = {},
							sd_sdf = this
						VerifyCode.Services = "ajaxverify.VerifyCode"
						VerifyCode.usertoken = getusertoken()
						VerifyCode.mobile = this.xmosd
						VerifyCode.mobilecode = this.xyama
						m_ajax(VerifyCode, function(data) {
								var updatenewmoblie={}
								updatenewmoblie.usertoken=getusertoken()
								updatenewmoblie.mobile=sd_sdf.xmosd
								updatenewmoblie.mobilecode=sd_sdf.xyama
								m_ajax(updatenewmoblie,function(){
									mui.back()
								})
						})
					}
				},
				created: function() {
					this.gf_sds = getuser().mobile
				}

			})
		</script>
	</body>

</html>